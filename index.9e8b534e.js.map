{"mappings":"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","sources":["src/paddle.js","src/input.js","src/collisionDetection.js","src/ball.js","src/brick.js","src/levels.js","src/game.js","src/index.js"],"sourcesContent":["export default class Paddle {\n  constructor(game) {\n    this.game = game;\n    this.width = 150;\n    this.height = 20;\n    this.maxSpeed = 7;\n    this.speed = 0;\n    this.position = {\n      x: game.gameWidth / 2 - this.width / 2,\n      y: game.gameHeight - this.height - 10\n    };\n  }\n\n  moveLeft() {\n    this.speed = -this.maxSpeed;\n  }\n\n  moveRight() {\n    this.speed = this.maxSpeed;\n  }\n\n  stop() {\n    this.speed = 0;\n  }\n\n  draw(ctx) {\n    ctx.fillStyle = \"#0ff\";\n    ctx.fillRect(this.position.x, this.position.y, this.width, this.height);\n  }\n\n  update(deltaTime) {\n    this.position.x += this.speed;\n\n    if (this.position.x < 0) this.position.x = 0;\n\n    if (this.position.x + this.width > this.game.gameWidth)\n      this.position.x = this.game.gameWidth - this.width;\n  }\n}","export default class InputHandler {\n  constructor(game) {\n    document.addEventListener(\"keydown\", (event) => {\n      switch (event.key) {\n        case \"ArrowLeft\":\n          game.paddle.moveLeft();\n          break;\n        case \"ArrowRight\":\n          game.paddle.moveRight();\n          break;\n        case \"Escape\":\n          game.togglePause();\n          break;\n        case \" \":\n          game.start();\n          break;\n      }\n    });\n\n    document.addEventListener(\"keyup\", (event) => {\n      switch (event.key) {\n        case \"ArrowLeft\":\n          if (game.paddle.speed < 0)\n            game.paddle.stop();\n          break;\n        case \"ArrowRight\":\n          if (game.paddle.speed > 0)\n            game.paddle.stop();\n          break;\n      }\n    });\n  }\n}","export function detectCollision(ball, gameObject) {\n  // check collision with paddle\n  let topOfBall = ball.position.y;\n  let bottomOfBall = ball.position.y + ball.size;\n  let topOfObject = gameObject.position.y;\n  let leftSideOfObject = gameObject.position.x;\n  let rightSideOfObject = gameObject.position.x + gameObject.width;\n  let bottomOfObject = gameObject.position.y + gameObject.height;\n\n  if (bottomOfBall >= topOfObject &&\n    topOfBall <= bottomOfObject &&\n    ball.position.x >= leftSideOfObject &&\n    ball.position.x + ball.size <= rightSideOfObject)\n    return true;\n\n  return false;\n}","import { detectCollision } from \"/src/collisionDetection\";\n\nexport default class Ball {\n  constructor(game) {\n    this.game = game;\n    this.image = document.getElementById(\"img_ball\");\n    this.size = 16;\n    this.reset();\n  }\n\n  reset() {\n    this.speed = {\n      x: 4,\n      y: 4,\n    };\n    this.position = {\n      x: 10,\n      y: 400,\n    };\n  }\n\n  draw(ctx) {\n    ctx.drawImage(this.image, this.position.x, this.position.y, this.size,\n      this.size);\n  }\n\n  update(deltaTime) {\n    this.position.x += this.speed.x;\n    this.position.y += this.speed.y;\n\n    // check collision with boundaries\n    if (this.position.x + this.size > this.game.gameWidth || this.position.x <\n      0)\n      this.speed.x = -this.speed.x;\n    if (this.position.y < 0)\n      this.speed.y = -this.speed.y;\n\n    if (this.position.y + this.size > this.game.gameHeight) {\n      this.game.lives--;\n      this.reset();\n    }\n\n    // check collision with paddle\n    // TODO: fix buggy collision when hitting on the side\n    if (detectCollision(this, this.game.paddle))\n      this.speed.y = -this.speed.y;\n  }\n}","import { detectCollision } from \"/src/collisionDetection\";\n\nexport default class Brick {\n  constructor(game, position) {\n    this.game = game;\n    this.image = document.getElementById(\"img_brick\");\n    this.position = position;\n    this.width = 80;\n    this.height = 24;\n    this.markedForDeletion = false;\n  }\n\n  update() {\n    if (detectCollision(this.game.ball, this)) {\n      this.game.ball.speed.y = -this.game.ball.speed.y;\n      this.markedForDeletion = true;\n    }\n\n  }\n\n  draw(ctx) {\n    ctx.drawImage(\n      this.image,\n      this.position.x,\n      this.position.y,\n      this.width,\n      this.height\n    )\n  }\n}","import Brick from \"/src/brick\";\n\nexport function buildLevel(game, level) {\n  let bricks = [];\n\n  level.forEach((row, rowIndex) => {\n    row.forEach((brick, brickIndex) => {\n      if (brick === 1) {\n        let position = {\n          x: 80 * brickIndex,\n          y: 20 + 24 * rowIndex\n        }\n        bricks.push(new Brick(game, position))\n      }\n    });\n  });\n\n  return bricks;\n}\n\nexport const level1 = [\n  [0, 0, 0, 1, 0, 0, 0, 0, 0, 0]\n];\n\nexport const level2 = [\n  [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],\n  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]\n];","import Paddle from \"/src/paddle\";\nimport InputHandler from \"/src/input\";\nimport Ball from \"/src/ball\";\nimport { buildLevel, level1, level2 } from \"/src/levels\";\n\nconst GAMESTATE = {\n  PAUSED: 0,\n  RUNNING: 1,\n  MENU: 2,\n  GAMEOVER: 3,\n  NEWLEVEL: 4,\n}\n\nexport default class Game {\n  constructor(gameWidth, gameHeight) {\n    this.gameWidth = gameWidth;\n    this.gameHeight = gameHeight;\n    this.gameState = GAMESTATE.MENU;\n    this.lives = 3;\n    this.paddle = new Paddle(this);\n    this.ball = new Ball(this);\n    this.bricks = [];\n    this.gameObjects = [];\n    this.levels = [level1, level2];\n    this.currentLevel = 0;\n    new InputHandler(this);\n  }\n\n  start() {\n    if (this.gameState !== GAMESTATE.MENU &&\n      this.gameState !== GAMESTATE.NEWLEVEL) return;\n\n    this.bricks = buildLevel(this, this.levels[this.currentLevel]);\n    this.ball.reset();\n    this.gameObjects = [this.ball, this.paddle];\n\n    this.gameState = GAMESTATE.RUNNING;\n  }\n\n  update(deltaTime) {\n    if (this.lives === 0) this.gameState = GAMESTATE.GAMEOVER;\n\n    if (this.gameState === GAMESTATE.PAUSED ||\n      this.gameState === GAMESTATE.MENU ||\n      this.gameState === GAMESTATE.GAMEOVER)\n      return;\n\n    if (this.bricks.length === 0) {\n      this.currentLevel++;\n      this.gameState = GAMESTATE.NEWLEVEL;\n      this.start();\n    }\n\n    [...this.gameObjects, ...this.bricks].forEach((object) => {\n      object.update(deltaTime);\n    });\n    this.bricks = this.bricks.filter((object) => !object\n      .markedForDeletion);\n  }\n\n  draw(ctx) {\n    [...this.gameObjects, ...this.bricks].forEach((object) => {\n      object.draw(ctx);\n    });\n\n    if (this.gameState === GAMESTATE.PAUSED) {\n      ctx.fillStyle = \"rgba(0,0,0,0.5)\";\n      ctx.fillRect(0, 0, this.gameWidth, this.gameHeight);\n      ctx.font = \"30px Arial\";\n      ctx.fillStyle = \"white\";\n      ctx.textAlign = \"center\";\n      ctx.fillText(\"Paused\", this.gameWidth / 2, this.gameHeight / 2)\n    }\n\n    if (this.gameState === GAMESTATE.MENU) {\n      ctx.fillStyle = \"rgba(0,0,0,1)\";\n      ctx.fillRect(0, 0, this.gameWidth, this.gameHeight);\n      ctx.font = \"30px Arial\";\n      ctx.fillStyle = \"white\";\n      ctx.textAlign = \"center\";\n      ctx.fillText(\"Press SPACEBAR to start\", this.gameWidth / 2, this\n        .gameHeight / 2)\n    }\n\n    if (this.gameState === GAMESTATE.GAMEOVER) {\n      ctx.fillStyle = \"rgba(0,0,0,1)\";\n      ctx.fillRect(0, 0, this.gameWidth, this.gameHeight);\n      ctx.font = \"30px Arial\";\n      ctx.fillStyle = \"white\";\n      ctx.textAlign = \"center\";\n      ctx.fillText(\"GAME OVER\", this.gameWidth / 2, this\n        .gameHeight / 2)\n    }\n  }\n\n  togglePause() {\n    // TODO: Fix that you can pause when in the menu\n    if (this.gameState === GAMESTATE.PAUSED)\n      this.gameState = GAMESTATE.RUNNING;\n    else\n      this.gameState = GAMESTATE.PAUSED;\n  }\n}","import Game from \"/src/game\";\n\nvar canvas = document.getElementById(\"gameScreen\");\nvar context = canvas.getContext(\"2d\");\n\nconst GAME_WIDTH = 800;\nconst GAME_HEIGHT = 600;\n\nlet game = new Game(GAME_WIDTH, GAME_HEIGHT);\nlet lastTime = 0;\n\nfunction gameLoop(timestamp) {\n  let deltaTime = timestamp - lastTime;\n  lastTime = timestamp;\n\n  context.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);\n  game.update(deltaTime);\n  game.draw(context);\n\n  requestAnimationFrame(gameLoop);\n}\n\nrequestAnimationFrame(gameLoop);"],"names":["$2e37cbd2a771f0a5$export$2e2bcd8739ae039","constructor","game","this","width","height","maxSpeed","speed","position","x","gameWidth","y","gameHeight","moveLeft","moveRight","stop","draw","ctx","fillStyle","fillRect","update","deltaTime","$bec8d0683b793ab3$export$2e2bcd8739ae039","document","addEventListener","event","key","paddle","togglePause","start","$7752b488de033c41$export$8ffbddbd9c97f8c4","ball","gameObject","topOfBall","bottomOfBall","size","topOfObject","leftSideOfObject","rightSideOfObject","bottomOfObject","$8d2352631c7dc17a$export$2e2bcd8739ae039","image","getElementById","reset","drawImage","lives","$ef9f9092656261be$export$2e2bcd8739ae039","markedForDeletion","$78dac17d7a729687$export$39c84188a71202f7","$78dac17d7a729687$export$9b21e6aa4bc1ce7e","$4ee2b06a9c1953f0$var$GAMESTATE","$35da740d59af89ba$var$context","getContext","$35da740d59af89ba$var$game","gameState","bricks","gameObjects","levels","currentLevel","level","forEach","row","rowIndex","brick","brickIndex","push","$78dac17d7a729687$export$2b171df81af8d3ba","length","object","filter","font","textAlign","fillText","$35da740d59af89ba$var$lastTime","requestAnimationFrame","$35da740d59af89ba$var$gameLoop","timestamp","clearRect"],"version":3,"file":"index.9e8b534e.js.map"}